~/.claude.json

Ïù¥Í≤å Íπ®Ï†∏ÏÑú Î≥µÏõêÌñàÎäîÎç∞ Í∞Å propertyÍ∞Ä Ï†ÅÏ†àÌïú ÏúÑÏπòÏóê Îì§Ïñ¥Í∞ÄÏûàÎäîÏßÄ ÌôïÏù∏Ìï¥Ï§ò

---

Index: Error
Watcher update failed: unable to open database file

ÏùºÏãúÏ†ÅÏúºÎ°ú Î∞úÏÉùÌïúÍ±∞Ïïº? ÏõêÏù∏ Î∂ÑÏÑùÌï¥ÏÑú ÏàòÏ†ï Ï§ëÏù¥ÏóàÎäîÎç∞ Îã§Ïãú Ïù¥Ïñ¥ÏÑú ÏàòÏ†ï ÏßÑÌñâÌï¥Ï§ò

ing_active=false
[watcher] db_connection FAILED after 0ms: unable to open database file (upsert=3 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=3 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[watcher] db_connection FAILED after 0ms: unable to open database file (upsert=6 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=6 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=2 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=2 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[watcher] db_connection FAILED after 2ms: unable to open database file (upsert=2 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=2 indexing_active=false
[watcher] db_connection FAILED after 2ms: unable to open database file (upsert=4 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=4 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[watcher] db_connection FAILED after 4ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[watcher] db_connection FAILED after 2ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=2 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=2 indexing_active=false
[watcher] db_connection FAILED after 2ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[watcher] db_connection FAILED after 2ms: unable to open database file (upsert=2 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=2 indexing_active=false
[watcher] db_connection FAILED after 0ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=2 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=2 indexing_active=false
[watcher] db_connection FAILED after 3ms: unable to open database file (upsert=8 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=8 indexing_active=false
[watcher] db_connection FAILED after 2ms: unable to open database file (upsert=3 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=3 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=2 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=2 indexing_active=false
[watcher] db_connection FAILED after 2ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[watcher] db_connection FAILED after 0ms: unable to open database file (upsert=2 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=2 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=2 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=2 indexing_active=false
[watcher] db_connection FAILED after 1ms: unable to open database file (upsert=1 delete=0 indexing_active=false)
[watcher] process_watcher_paths ERROR: unable to open database file | batch_size=1 indexing_active=false
[rpc/search] total=191.794ms execute=191.791ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=481.948ms execute=437.272ms total_count=44.673ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173929 total_known=true db_ready=true indexing_active=false
[rpc/search] total=74.257ms execute=74.251ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=114.971ms execute=76.294ms total_count=38.673ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173929 total_known=true db_ready=true indexing_active=false
[rpc/search] total=359.651ms execute=359.649ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=423.904ms execute=348.414ms total_count=75.487ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173929 total_known=true db_ready=true indexing_active=false
[rpc/search] total=102.730ms execute=102.728ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=254.705ms execute=204.235ms total_count=50.467ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173931 total_known=true db_ready=true indexing_active=false
[rpc/search] total=116.679ms execute=116.675ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=203.902ms execute=120.423ms total_count=83.476ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173932 total_known=true db_ready=true indexing_active=false
[rpc/search] total=73.025ms execute=73.021ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=148.425ms execute=89.733ms total_count=58.688ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173931 total_known=true db_ready=true indexing_active=false
[rpc/search] total=91.805ms execute=91.801ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=162.499ms execute=72.681ms total_count=89.815ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173931 total_known=true db_ready=true indexing_active=false
[rpc/search] total=61.325ms execute=61.323ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=80.451ms execute=58.159ms total_count=22.289ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173931 total_known=true db_ready=true indexing_active=false
[rpc/search] total=119.339ms execute=119.337ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=641.795ms execute=174.079ms total_count=467.711ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173932 total_known=true db_ready=true indexing_active=false
[rpc/search] total=605.949ms execute=605.945ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=441.891ms execute=404.287ms total_count=37.601ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=90.821ms execute=90.818ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=275.986ms execute=133.153ms total_count=142.829ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=116.710ms execute=116.704ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=241.390ms execute=116.659ms total_count=124.727ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=62.499ms execute=62.496ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=92.610ms execute=69.837ms total_count=22.770ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=77.025ms execute=77.021ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=118.686ms execute=81.998ms total_count=36.684ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=59.330ms execute=59.328ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=100.511ms execute=67.985ms total_count=32.523ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=67.280ms execute=67.277ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=134.697ms execute=79.880ms total_count=54.812ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=70.657ms execute=70.652ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=83.750ms execute=60.376ms total_count=23.371ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=58.599ms execute=58.596ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=76.068ms execute=55.969ms total_count=20.097ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173933 total_known=true db_ready=true indexing_active=false
[rpc/search] total=59.337ms execute=59.335ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=81.038ms execute=56.059ms total_count=24.976ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173934 total_known=true db_ready=true indexing_active=false
[rpc/search] total=62.032ms execute=62.021ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false
[rpc/search] total=137.004ms execute=75.436ms total_count=61.566ms include_total=true query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=1173935 total_known=true db_ready=true indexing_active=false
[rpc/search] total=81.023ms execute=81.020ms total_count=0.000ms include_total=false query="" mode=empty sort=name/asc limit=500 offset=0 results=500 total_count=0 total_known=false db_ready=true indexing_active=false

---

[Request interrupted by user]

---

‚ûú  everything git:(main) ‚úó npm run tauri dev

> everything@0.1.0 tauri
> tauri dev

     Running BeforeDevCommand (`npm run dev`)

> everything@0.1.0 dev
> vite

failed to load config from /Users/al02402336/everything/vite.config.js
error when starting dev server:
Error: ENOSPC: no space left on device, open '/Users/al02402336/everything/vite.config.js.timestamp-1771754130389-5370474713aa4.mjs'
    at async open (node:internal/fs/promises:640:25)
    at async Object.writeFile (node:internal/fs/promises:1214:14)
    at async loadConfigFromBundledFile (file:REDACTED.js:66973:5)
    at async loadConfigFromFile (file:REDACTED.js:66816:24)
    at async resolveConfig (file:REDACTED.js:66416:24)
    at async _createServer (file:REDACTED.js:63015:18)
    at async CAC.<anonymous> (file:///Users/al02402336/everything/node_modules/vite/dist/node/cli.js:736:20)
       Error The "beforeDevCommand" terminated with a non-zero status code.

---

warning: method `root_paths` is never used
  --> src/gitignore_filter.rs:23:12
   |
17 | impl GitignoreFilter {
   | -------------------- method in this implementation
...
23 |     pub fn root_paths(&self) -> Vec<&Path> {
   |            ^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` on by default

rustc-LLVM ERROR: IO failure on output stream: No space left on device
warning: `everything` (bin "everything") generated 1 warning
error: could not compile `everything` (bin "everything"); 1 warning emitted

Caused by:
  process didn't exit successfully: `/Users/al02402336/.rustup/toolchains/1.90-aarch64-apple-darwin/bin/rustc --crate-name everything --edition=2021 src/main.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type bin --emit=dep-info,link -C embed-bitcode=no -C debuginfo=2 -C split-debuginfo=unpacked --check-cfg 'cfg(docsrs,test)' --check-cfg 'cfg(feature, values("custom-protocol", "default"))' -C metadata=9f013b27c3294d85 -C extra-filename=-614d3ae8d3a2947e --out-dir /Users/al02402336/everything/src-tauri/target/debug/deps -C incremental=/Users/al02402336/everything/src-tauri/target/debug/incremental -L dependency=/Users/al02402336/everything/src-tauri/target/debug/deps --extern REDACTED.rlib --extern REDACTED.rlib --extern REDACTED.rlib --extern REDACTED.rlib --extern REDACTED.rlib --extern serde=/Users/al02402336/everything/src-tauri/target/debug/deps/libserde-b7a2f43f363bb934.rlib --extern REDACTED.rlib --extern REDACTED.rlib --extern REDACTED.rlib --extern tauri_plugin_drag=/Users/al02402336/everything/src-tauri/target/debug/deps/libtauri_plugin_drag-309aa00590da3e60.rlib --extern REDACTED.rlib --extern REDACTED.rlib --extern REDACTED.rlib --extern REDACTED.rlib -L REDACTED -L REDACTED --cfg desktop --cfg dev --check-cfg 'cfg(desktop)' --check-cfg 'cfg(mobile)' --check-cfg 'cfg(dev)'` (exit status: 101)

---

Ïù¥Ï†ÑÏóê ÌïòÎçò ÏµúÏ†ÅÌôîÎ•º Ïù¥Ïñ¥ÏÑú ÏßÑÌñâÌï¥Ï§ò

---

in 57sÍ∞Ä Ï≤´Î≤àÏß∏ Í≤ÄÏÉâ ÌïòÎ©¥ÏÑú ÏÇ¨ÎùºÏßÄÍ≤å ÎßåÎì§Ïñ¥Ï§ò

---

reset Î≤ÑÌäºÏùÑ ÎàÑÎ¶¨Î©¥ scanned: 0Ïù∏Ï±ÑÎ°ú Ïò§Îû´ÎèôÏïà Î®∏Î¨¥ÎäîÎç∞ Í∑∏Í±¥ ÏôúÍ∑∏Îü∞Í±∞Ïïº?

---

[Request interrupted by user]

---

Conduct a thorough, line-by-line code review with a critical perspective.

**Usage:**
```bash
/ln:codereview           # Review all uncommitted changes (default)
/ln:codereview all       # Review all uncommitted changes (staged + unstaged)
/ln:codereview unstaged  # Review only unstaged changes
```

## Review Scope

**Mode 1: All uncommitted changes (default)**
- Command: `git diff HEAD` (staged + unstaged)
- Reviews everything not yet committed

**Mode 2: Unstaged only**
- Command: `git diff` (working directory changes only)
- Reviews only files not yet staged

All modes include:
1. **Critical examination**: Line-by-line inspection with skeptical mindset
2. **Pattern validation**: Verify adherence to project conventions and guides

## Review Categories

### Code Quality
- **Clean code**: No TODO comments, no unused code
- **Naming conventions**: Consistent with project standards
- **File organization**: Proper separation of concerns
- **Documentation**: Adequate comments where necessary

### Technical Validation
- **Build verification**: Zero warnings, all tests pass
- **Type safety**: No type errors or unsafe operations
- **Performance**: No memory leaks, efficient algorithms
- **Security**: No hardcoded secrets or vulnerabilities

### Architecture Review
- **Design patterns**: Appropriate use of patterns
- **Dependency management**: Minimal coupling
- **Error handling**: Comprehensive error coverage
- **Concurrency**: Thread safety and race conditions

### Design Principles (OCP/SRP)

**OCP (Open-Closed Principle) violations to catch:**
- Adding `else if` / `switch case` to extend existing behavior
- Modifying stable code instead of creating new modules
- Missing extension points (strategy, registry, plugin patterns)

**SRP (Single Responsibility Principle) violations to catch:**
- One file handling multiple unrelated concerns
- Functions/classes that change for multiple reasons
- God objects or utility dumps

**When found, suggest:**
- Extract new behavior into separate file/class
- Use strategy/registry pattern for extensibility
- Split multi-responsibility files into focused modules

## Review Process

### Step 0: Understand Project Context (MANDATORY)

Before reviewing any code, you MUST understand the project environment:

1. **Read CLAUDE.md** - Check project root and user's `~/.claude/CLAUDE.md` for project-specific conventions
2. **Identify app type** - Read entry points, config files, or main modules to determine:
   - **Platform**: Desktop (Electron) / Mobile (React Native, Flutter, iOS, Android) / Web server / CLI / Library
   - **User model**: Single-user vs Multi-user
   - **Network exposure**: Local-only vs Network-exposed API
3. **Understand architecture** - Scan key files to grasp the overall structure

**Why this matters:**
- Security concerns differ drastically between local desktop app and public API server
- "Memory leak" in a short-lived CLI is irrelevant; in a long-running server it's critical
- Path traversal in local-only app with file dialog is low-risk; in server accepting arbitrary input it's critical

**DO NOT skip this step.** Reviewing without context leads to false positives and wastes everyone's time.

### Step 1: Analyze Changes

Determine review mode from command argument (default: `all`):

**Mode: all (default)**
```bash
git diff HEAD  # All uncommitted changes (staged + unstaged)
```

**Mode: unstaged**
```bash
git diff  # Only unstaged changes
```

### Step 2: Validate Build
- TypeScript: `npx tsc --noEmit`
- Linting: `npm run lint`
- Testing: `npm run test`
- Language-specific checks per development guides

### Step 3: Generate Report

I will provide a structured report with:

#### Critical Issues üö®
- **ONLY** issues that will cause runtime crashes, data loss, or security breaches
- Must be reproducible with concrete steps
- Example: SQL injection, unhandled null causing crash, infinite loop

#### Major Issues ‚ö†Ô∏è
- Issues that cause incorrect behavior users will notice
- Must demonstrate actual failure scenario
- Example: Wrong calculation result, UI not updating, API returning wrong data

#### Minor Issues üí°
- Style violations or optimization opportunities
- Suggestions for improvement
- Example: Inconsistent naming, missing error message

**DO NOT mark as Critical/Major:**
- Theoretical concerns without concrete failure scenario
- "Could potentially cause..." without proof
- Design preferences or "I would do it differently"

#### Positive Highlights ‚úÖ
- Well-implemented patterns
- Good practices observed

## Review Principles

- **No temporary solutions**: Reject workarounds or hacks
- **Complete implementation**: No partial features with TODOs
- **Performance first**: Consider memory, CPU, and I/O impact
- **Build cleanliness**: Zero warnings tolerance
- **Guide compliance**: Follow all development guides in docs/

## ‚õî Anti-Hallucination Rules

Before reporting ANY issue, you MUST:

1. **READ the actual code** - Don't guess based on patterns. Read the exact lines.
2. **TRACE the execution flow** - Follow the code path. If you claim race condition, prove it step by step.
3. **VERIFY the issue exists** - Can you reproduce it? Show concrete scenario.
4. **CHECK context** - What's the runtime environment? Desktop vs server, single-user vs multi-user?
5. **CONFIRM it's not intentional** - fire-and-forget, placeholder values updated later, etc. may be by design.

### Issue Validation Checklist

For each issue you want to report, answer:
1. Did I read the ACTUAL code, not just the diff snippet?
2. Can I show the EXACT line numbers where this fails?
3. Is this a REAL bug or theoretical concern that can't happen in practice?
4. Does the surrounding code already handle this case?

### What NOT to report as issues:
- Singleton with placeholder that gets updated in init/start method
- "Memory leak" in single-user desktop app with bounded data
- "Race condition" when there's already a guard (e.g., `if (this.running) return`)
- Intentional fire-and-forget patterns with error logging
- "Missing cleanup" when cleanup exists in useEffect return or stop() method

## Exclusions (Do NOT Review)

- **Git submodule reference changes only**: Skip dirty submodule states, submodule commit hash changes in the main repo. Source code inside submodules CAN and SHOULD be reviewed when requested.

## Output Format

The review will be delivered as a comprehensive report with:
- Severity-based issue categorization
- Specific line references for each issue
- Concrete suggestions for fixes
- Overall code health assessment

---

Conduct a thorough, line-by-line code review with a critical perspective.

**Usage:**
```bash
/ln:codereview           # Review all uncommitted changes (default)
/ln:codereview all       # Review all uncommitted changes (staged + unstaged)
/ln:codereview unstaged  # Review only unstaged changes
```

## Review Scope

**Mode 1: All uncommitted changes (default)**
- Command: `git diff HEAD` (staged + unstaged)
- Reviews everything not yet committed

**Mode 2: Unstaged only**
- Command: `git diff` (working directory changes only)
- Reviews only files not yet staged

All modes include:
1. **Critical examination**: Line-by-line inspection with skeptical mindset
2. **Pattern validation**: Verify adherence to project conventions and guides

## Review Categories

### Code Quality
- **Clean code**: No TODO comments, no unused code
- **Naming conventions**: Consistent with project standards
- **File organization**: Proper separation of concerns
- **Documentation**: Adequate comments where necessary

### Technical Validation
- **Build verification**: Zero warnings, all tests pass
- **Type safety**: No type errors or unsafe operations
- **Performance**: No memory leaks, efficient algorithms
- **Security**: No hardcoded secrets or vulnerabilities

### Architecture Review
- **Design patterns**: Appropriate use of patterns
- **Dependency management**: Minimal coupling
- **Error handling**: Comprehensive error coverage
- **Concurrency**: Thread safety and race conditions

### Design Principles (OCP/SRP)

**OCP (Open-Closed Principle) violations to catch:**
- Adding `else if` / `switch case` to extend existing behavior
- Modifying stable code instead of creating new modules
- Missing extension points (strategy, registry, plugin patterns)

**SRP (Single Responsibility Principle) violations to catch:**
- One file handling multiple unrelated concerns
- Functions/classes that change for multiple reasons
- God objects or utility dumps

**When found, suggest:**
- Extract new behavior into separate file/class
- Use strategy/registry pattern for extensibility
- Split multi-responsibility files into focused modules

## Review Process

### Step 0: Understand Project Context (MANDATORY)

Before reviewing any code, you MUST understand the project environment:

1. **Read CLAUDE.md** - Check project root and user's `~/.claude/CLAUDE.md` for project-specific conventions
2. **Identify app type** - Read entry points, config files, or main modules to determine:
   - **Platform**: Desktop (Electron) / Mobile (React Native, Flutter, iOS, Android) / Web server / CLI / Library
   - **User model**: Single-user vs Multi-user
   - **Network exposure**: Local-only vs Network-exposed API
3. **Understand architecture** - Scan key files to grasp the overall structure

**Why this matters:**
- Security concerns differ drastically between local desktop app and public API server
- "Memory leak" in a short-lived CLI is irrelevant; in a long-running server it's critical
- Path traversal in local-only app with file dialog is low-risk; in server accepting arbitrary input it's critical

**DO NOT skip this step.** Reviewing without context leads to false positives and wastes everyone's time.

### Step 1: Analyze Changes

Determine review mode from command argument (default: `all`):

**Mode: all (default)**
```bash
git diff HEAD  # All uncommitted changes (staged + unstaged)
```

**Mode: unstaged**
```bash
git diff  # Only unstaged changes
```

### Step 2: Validate Build
- TypeScript: `npx tsc --noEmit`
- Linting: `npm run lint`
- Testing: `npm run test`
- Language-specific checks per development guides

### Step 3: Generate Report

I will provide a structured report with:

#### Critical Issues üö®
- **ONLY** issues that will cause runtime crashes, data loss, or security breaches
- Must be reproducible with concrete steps
- Example: SQL injection, unhandled null causing crash, infinite loop

#### Major Issues ‚ö†Ô∏è
- Issues that cause incorrect behavior users will notice
- Must demonstrate actual failure scenario
- Example: Wrong calculation result, UI not updating, API returning wrong data

#### Minor Issues üí°
- Style violations or optimization opportunities
- Suggestions for improvement
- Example: Inconsistent naming, missing error message

**DO NOT mark as Critical/Major:**
- Theoretical concerns without concrete failure scenario
- "Could potentially cause..." without proof
- Design preferences or "I would do it differently"

#### Positive Highlights ‚úÖ
- Well-implemented patterns
- Good practices observed

## Review Principles

- **No temporary solutions**: Reject workarounds or hacks
- **Complete implementation**: No partial features with TODOs
- **Performance first**: Consider memory, CPU, and I/O impact
- **Build cleanliness**: Zero warnings tolerance
- **Guide compliance**: Follow all development guides in docs/

## ‚õî Anti-Hallucination Rules

Before reporting ANY issue, you MUST:

1. **READ the actual code** - Don't guess based on patterns. Read the exact lines.
2. **TRACE the execution flow** - Follow the code path. If you claim race condition, prove it step by step.
3. **VERIFY the issue exists** - Can you reproduce it? Show concrete scenario.
4. **CHECK context** - What's the runtime environment? Desktop vs server, single-user vs multi-user?
5. **CONFIRM it's not intentional** - fire-and-forget, placeholder values updated later, etc. may be by design.

### Issue Validation Checklist

For each issue you want to report, answer:
1. Did I read the ACTUAL code, not just the diff snippet?
2. Can I show the EXACT line numbers where this fails?
3. Is this a REAL bug or theoretical concern that can't happen in practice?
4. Does the surrounding code already handle this case?

### What NOT to report as issues:
- Singleton with placeholder that gets updated in init/start method
- "Memory leak" in single-user desktop app with bounded data
- "Race condition" when there's already a guard (e.g., `if (this.running) return`)
- Intentional fire-and-forget patterns with error logging
- "Missing cleanup" when cleanup exists in useEffect return or stop() method

## Exclusions (Do NOT Review)

- **Git submodule reference changes only**: Skip dirty submodule states, submodule commit hash changes in the main repo. Source code inside submodules CAN and SHOULD be reviewed when requested.

## Output Format

The review will be delivered as a comprehensive report with:
- Severity-based issue categorization
- Specific line references for each issue
- Concrete suggestions for fixes
- Overall code health assessment

---

<task-notification>
<task-id>b136744</task-id>
<tool-use-id>toolu_01GQDxW3QwJkXQMBnpx22bHu</tool-use-id>
<output-file>REDACTED.output</output-file>
<status>completed</status>
<summary>Background command "Run Rust tests" completed (exit code 0)</summary>
</task-notification>
Read the output file to retrieve the result: REDACTED.output

---

Î™®Îëê ÏàòÏ†ïÌï¥Ï§ò

---

<task-notification>
<task-id>b237647</task-id>
<tool-use-id>REDACTED</tool-use-id>
<output-file>REDACTED.output</output-file>
<status>completed</status>
<summary>Background command "Check test results summary" completed (exit code 0)</summary>
</task-notification>
Read the output file to retrieve the result: REDACTED.output

---

"svelte": "^5.53.2"Ïù∏Îç∞? Îã§Ïãú ÌôïÏù∏Ìï¥Ï§ÑÎûò?

---

commit

---

[Request interrupted by user]